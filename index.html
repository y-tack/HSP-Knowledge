---
layout: default
title: HSP-Knowledge
---

<div class="layout-main">

  <div class="main-column">
    <div class="search-box">
      <input
        type="search"
        id="post-search-keyword"
        placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»æ¦‚è¦ï¼‰"
        autocomplete="off">
      <input
        type="search"
        id="post-search-tag"
        placeholder="ã‚¿ã‚°æ¤œç´¢"
        autocomplete="off">
    </div>

    <h2>è¨˜äº‹ä¸€è¦§</h2>

    <ul class="post-list" id="post-list">
      {% for post in site.posts %}
      <li class="post-card"
          data-title="{{ post.title | escape }}"
          data-tags="{% if post.tags %}{{ post.tags | join: ' ' | escape }}{% endif %}">
        <h3 class="post-title">
          <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
        </h3>
        <div class="post-meta">
          <span class="post-date">
            {% if post.lastupdate %}
              ğŸ”„ {{ post.lastupdate | date: "%Y-%m-%d" }}
            {% else %}
              ğŸ“… {{ post.date | date: "%Y-%m-%d" }}
            {% endif %}
          </span>
          {% if post.author %}
          <span class="post-author">by {{ post.author }}</span>
          {% endif %}
        </div>

        {% if post.tags %}
        <ul class="tag-list">
          {% for tag in post.tags %}
          <li class="tag-item">
            <a href="{{ '/?tag=' | append: tag | relative_url }}">{{ tag }}</a>
          </li>
          {% endfor %}
        </ul>
        {% endif %}

        <p class="post-summary">
          {{ post.summary | strip_html | truncate: 120 }}
        </p>
      </li>
      {% endfor %}
    </ul>
  </div>


</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  var inputKeyword = document.getElementById('post-search-keyword');
  var inputTag = document.getElementById('post-search-tag');
  var list = document.getElementById('post-list');
  if (!inputKeyword || !inputTag || !list) return;

  var items = Array.prototype.slice.call(list.querySelectorAll('.post-card'));

  function normalize(text) {
    return (text || '').toLowerCase();
  }

  // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å‡¦ç†ã‚’é–¢æ•°åŒ–
  function filterPosts(keywordQuery, tagQuery) {
    var kq = normalize(keywordQuery);
    var tq = normalize(tagQuery);

    items.forEach(function (item) {
      var title = normalize(item.getAttribute('data-title'));
      var tags  = normalize(item.getAttribute('data-tags'));
      var summary = normalize(
        item.querySelector('.post-summary')?.textContent || ''
      );

      var keywordHit = !kq || title.indexOf(kq) !== -1 || summary.indexOf(kq) !== -1;
      var tagHit = !tq || tags.indexOf(tq) !== -1;

      item.style.display = (keywordHit && tagHit) ? '' : 'none';
    });
  }

  // å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã§ã®æ¤œç´¢
  function updateFilter() {
    filterPosts(inputKeyword.value, inputTag.value);
  }

  inputKeyword.addEventListener('input', updateFilter);
  inputTag.addEventListener('input', updateFilter);

  // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ (?tag=...) ã®èª­ã¿å–ã‚Šã¨åˆæœŸå®Ÿè¡Œ
  var urlParams = new URLSearchParams(window.location.search);
  var tagParam = urlParams.get('tag');
  if (tagParam) {
    inputTag.value = tagParam; // ã‚¿ã‚°æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã«ã‚¿ã‚°åã‚’å…¥ã‚Œã‚‹
    filterPosts('', tagParam);  // çµã‚Šè¾¼ã¿å®Ÿè¡Œ
  }
});
</script>